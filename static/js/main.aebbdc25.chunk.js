(this.webpackJsonp2048=this.webpackJsonp2048||[]).push([[0],{1583:function(e,n,r){"use strict";r.r(n);var t=r(2),a=r(0),c=r(30),o=r.n(c),u=(r(76),r(77),r(69)),i=r(14),s={0:"rgb(216, 206, 196)",2:"rgb(240, 228, 217)",4:"rgb(238, 225, 199)",8:"rgb(253, 175, 112)",16:"rgb(255, 143, 86)",32:"rgb(255, 112, 80)",64:"rgb(255, 70, 18)",128:"rgb(241, 210, 104)",256:"rgb(241, 208, 86)",512:"rgb(240, 203, 65)",1024:"rgb(242, 201, 39)",2048:"rgb(243, 197, 0)",4096:"rgb(255, 80, 75)",8192:"rgb(255, 34, 75)",16384:"rgb(248, 19, 30)"},f=r(10),l=r.n(f),p=r(23),g=r(24),d=r(6),y=r.n(d);r(85);function b(e){return e.reduce((function(e,n){return n.map((function(r,t){return(e[t]||[]).concat(n[t])}))}),[])}var O=function(e){var n=function(){var e=[2,2,2,4];return e[Math.floor(Math.random()*e.length)]}(),r=function(e){for(var n=[],r=0;r<e.length;r++)for(var t=0;t<e[r].length;t++)0===e[r][t]&&n.push([r,t]);return n}(e),t=JSON.parse(JSON.stringify(e)),a=r[Math.floor(Math.random()*r.length)];return r.length>0?(t[a[0]][a[1]]=n,t):t},h=function(e){for(var n=[],r=0;r<e.length;r++){for(var t=[],a=0;a<e[r].length;a++){var c=e[r][a];0===c?t.unshift(c):t.push(c)}n.push(t)}return n},j=function(e){for(var n=y.a.cloneDeep(e),r=0;r<n.length;r++)for(var t=n.length-1;t>=0;t--)n[r][t]>0&&n[r][t]===n[r][t-1]?(n[r][t]=2*n[r][t-1],n[r][t-1]=0):0===n[r][t]&&n[r][t-1]>0&&(n[r][t]=n[r][t-1],n[r][t-1]=0);return n},m=function(e){var n=y.a.cloneDeep(e).map((function(e){return e.reverse()})),r=h(n);return j(r).map((function(e){return e.reverse()}))},v=function(e){var n=y.a.cloneDeep(e),r=h(n);return j(r)},x=function(e){var n=b(y.a.cloneDeep(e));n.map((function(e){return e.reverse()}));var r=h(n),t=j(r);return t.map((function(e){return e.reverse()})),b(t)},S=function(e){var n=b(y.a.cloneDeep(e)),r=h(n);return b(j(r))},w="2048",A=w,E="".concat(A,"/INIT_NEW_GAME"),N="".concat(A,"/SET_NEW_NUMBER"),M="".concat(A,"/MOVE_LEFT"),k="".concat(A,"/MOVE_RIGHT"),T="".concat(A,"/MOVE_UP"),W="".concat(A,"/MOVE_DOWN"),_="".concat(A,"/WIN_GAME"),C="".concat(A,"/UPDATE_OLD_ARRAY"),I="".concat(A,"/SET_NEW_MAX_SCORE"),D={gameArray:JSON.parse(window.localStorage.getItem("gameArray"))||[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],maxScore:window.localStorage.getItem("maxScore"),prevGameArray:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],isWin:!1};var G=function(e){return e[2048]},J=Object(g.a)(G,(function(e){return e.gameArray})),R=Object(g.a)(G,(function(e){return e.maxScore})),V=Object(g.a)(G,(function(e){return e.isWin})),L=Object(g.a)(G,(function(e){var n=0;return e.gameArray.map((function(e){e.map((function(e){n+=e}))})),n})),U=r(41),F=r(70),K=r(42),P=r.n(K),q=function(e){var n=e.children,r=e.hotKey,c=e.onClick,o=Object(F.a)(e,["children","hotKey","onClick"]),u=Object(a.useRef)(null);return c?P.a.bind(r,(function(){c()})):P.a.bind(r,(function(){u.click()})),Object(t.jsx)("button",Object(U.a)(Object(U.a)({onClick:c,ref:u},o),{},{children:n}))};function Y(e){var n=e.gameArray,r=e.maxScore,c=e.currentScore,o=e.startGame,i=e.setNewNumber,f=e.getRight,l=e.getLeft,p=e.getUp,g=e.getDown,d=e.winGame,y=e.isWin;Object(a.useEffect)((function(){c>2047&&!y&&(d(),alert("YOU WON!"))}),[c]),Object(a.useEffect)((function(){window.localStorage.getItem("gameArray")||o()}),[i,o]);var b=Object(a.useState)(null),O=Object(u.a)(b,2),h=O[0],j=O[1];return Object(t.jsxs)("div",{onTouchStart:function(e){return j(e.changedTouches[0])},id:"2048",onTouchEnd:function(e){return function(e){var n=h.screenX,r=h.screenY,t=e.changedTouches[0].screenX,a=e.changedTouches[0].screenY;Math.abs(n-t)>Math.abs(r-a)?n>t?l():f():r>a?p():g()}(e)},children:[Object(t.jsx)("p",{children:"*2048*"}),Object(t.jsxs)("div",{children:[Object(t.jsx)("button",{id:"start2048",onClick:function(){return o()},children:"Start Game"}),Object(t.jsxs)("p",{children:["Max Score: ",r]}),Object(t.jsxs)("p",{children:["Score: ",c]})]}),Object(t.jsxs)("div",{children:[Object(t.jsx)(q,{onClick:function(){return p()},hotKey:"up",children:"UP"}),Object(t.jsx)(q,{onClick:function(){return g()},hotKey:"down",children:"DOWN"}),Object(t.jsx)(q,{onClick:function(){return l()},hotKey:"left",children:"LEFT"}),Object(t.jsx)(q,{onClick:function(){return f()},hotKey:"right",children:"RIGHT"})]}),n.map((function(e,n){return Object(t.jsx)("div",{className:"row",children:e.map((function(e,n){return Object(t.jsx)("div",{className:"cell",style:{backgroundColor:s[e]},children:e},n)}))},n)}))]})}function B(e,n){return JSON.stringify(e.gameArray)===JSON.stringify(n.gameArray)}var X=Object(i.c)((function(e){return{gameArray:J(e),maxScore:R(e),currentScore:L(e),isWin:V(e)}}),{startGame:function(){return{type:N,payload:O([[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]])}},setNewNumber:function(){return function(e,n){var r=n()[2048].gameArray;e({type:N,payload:O(r)})}},getRight:function(){return function(){var e=Object(p.a)(l.a.mark((function e(n,r){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r()[2048].gameArray,a=y.a.isEqual(t,v(v(t)))?t:O(v(v(t))),e.next=4,n({type:k,payload:a});case 4:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}()},getLeft:function(){return function(){var e=Object(p.a)(l.a.mark((function e(n,r){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r()[2048].gameArray,a=y.a.isEqual(t,m(m(t)))?t:O(m(m(t))),e.next=4,n({type:M,payload:a});case 4:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}()},getUp:function(){return function(){var e=Object(p.a)(l.a.mark((function e(n,r){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r()[2048].gameArray,a=y.a.isEqual(t,x(x(t)))?t:O(x(x(t))),e.next=4,n({type:T,payload:a});case 4:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}()},getDown:function(){return function(){var e=Object(p.a)(l.a.mark((function e(n,r){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r()[2048].gameArray,a=y.a.isEqual(t,S(S(t)))?t:O(S(S(t))),e.next=4,n({type:W,payload:a});case 4:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}()},winGame:function(){return{type:_,payload:!0}}})(Object(a.memo)(Y,B));var H,z=function(){return Object(t.jsx)("div",{className:"App",children:Object(t.jsx)(X,{})})},Q=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,1588)).then((function(n){var r=n.getCLS,t=n.getFID,a=n.getFCP,c=n.getLCP,o=n.getTTFB;r(e),t(e),a(e),c(e),o(e)}))},Z=r(13),$=r(64),ee=r.n($),ne=r(65),re=r(12),te=r(1587),ae=r(20),ce=r(66),oe=Object(ce.a)(),ue=Object(Z.c)((H={form:te.a},Object(re.a)(H,w,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,n=arguments.length>1?arguments[1]:void 0,r=n.type,t=n.payload;switch(r){case E:return Object.assign({},e,{gameArray:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],prevGameArray:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],isWin:!1});case N:return Object.assign({},e,{gameArray:t});case k:case M:case T:case W:return Object.assign({},e,{gameArray:t});case _:return Object.assign({},e,{isWin:t});case C:return Object.assign({},e,{prevGameArray:t});case I:return Object.assign({},e,{maxScore:t});default:return e}})),Object(re.a)(H,"router",Object(ae.b)(oe)),H)),ie=r(61),se=Object(Z.a)(ne.a,ee.a,Object(ie.a)(oe),(function(e){var n=e.dispatch,r=e.getState;return function(e){return function(t){var a=t.type,c=t.payload;if(a.includes("MOVE")){var o=r()[2048].gameArray;n({type:C,payload:o})}return e({type:a,payload:c})}}}),(function(){return function(e){return function(n){var r=n.type,t=n.payload;return(r.includes("MOVE")||r.includes("NEW"))&&window.localStorage.setItem("gameArray",JSON.stringify(t)),e({type:r,payload:t})}}}),(function(e){var n=e.dispatch;return function(e){return function(r){var t=r.type,a=r.payload;if(t.includes("MOVE")&&function(e){var n=JSON.stringify(e);return n===JSON.stringify(m(e))&&n===JSON.stringify(S(e))&&n===JSON.stringify(h(e))}(a)){var c=L(Object(re.a)({},w,{gameArray:a}));console.log(c),window.localStorage.getItem("maxScore")<c&&(window.localStorage.setItem("maxScore",c),n({type:I,payload:c}))}return e({type:t,payload:a})}}}),(function(e){var n=e.dispatch;return function(e){return function(r){var t=r.type,a=r.payload;if(t.includes("MOVE")){var c=L(Object(re.a)({},w,{gameArray:a}));if(c>2047){n({type:N,payload:O([[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]])})}}return e({type:t,payload:a})}}})),fe=Object(Z.d)(ue,se);o.a.render(Object(t.jsx)(i.a,{store:fe,children:Object(t.jsx)(ae.a,{history:oe,children:Object(t.jsx)(z,{})})}),document.getElementById("root")),Q()},76:function(e,n,r){},77:function(e,n,r){}},[[1583,1,2]]]);
//# sourceMappingURL=main.aebbdc25.chunk.js.map